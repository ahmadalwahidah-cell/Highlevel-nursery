# ๐ High Level Nursery - ูุธุงู ุฅุฏุงุฑุฉ ุงูุญุถุงูุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุฅุฏุงุฑุฉ ุดุงูู ูุญุถุงูุฉ High Level ูุดูู:
- ๐จโ๐ฉโ๐งโ๐ฆ ุฅุฏุงุฑุฉ ุงูุทูุงุจ ูุฃูููุงุก ุงูุฃููุฑ
- ๐ฉโ๐ซ ุฅุฏุงุฑุฉ ุงููุนููุงุช ูุงูููุธูุงุช
- โ ูุธุงู ุชุชุจุน ุญุถูุฑ ูุบูุงุจ ุงูุทูุงุจ
- ๐ ูุธุงู ุจุตูุฉ GPS ูููุนููุงุช (ุญุถูุฑ/ุงูุตุฑุงู)
- ๐ ูุธุงู ุฃูุงู ูุชูุฏู (Device Fingerprint)
- ๐ฐ ูุธุงู ุงูููุฒุงููุฉ ูุงููุตุฑููุงุช
- ๐ฌ ูุธุงู ุงูุฑุณุงุฆู ููุชูุงุตู ูุน ุฃูููุงุก ุงูุฃููุฑ
- ๐ ุชูุงุฑูุฑ ูุฅุญุตุงุฆูุงุช ุดุงููุฉ

## ๐ ุฑูุงุจุท ุงูุชุทุจูู

### ูููุนููุงุช:
- **ุชุณุฌูู ุฏุฎูู ุงููุนููุงุช:** https://highlevel-nursery.pages.dev/teacher/login
- **ุตูุญุฉ ุงูุจุตูุฉ (V3):** https://highlevel-nursery.pages.dev/nursery/teacher/attendance-v3
- **ุณุฌูุงุช ุงูุญุถูุฑ:** https://highlevel-nursery.pages.dev/nursery/teacher/attendance/logs

### ูููุทูุฑ:
- **ุตูุญุฉ ุงููุทูุฑ (ุฃููุงุช ุงููุนููุงุช):** https://highlevel-nursery.pages.dev/developer/teacher-schedules?password=dev2025
- **ูููุฉ ุงููุฑูุฑ:** `dev2025`

### ุนุงู:
- **ุงูุฅูุชุงุฌ:** https://highlevel-nursery.pages.dev
- **ุขุฎุฑ ูุดุฑ:** https://3f4f69ee.highlevel-nursery.pages.dev

## โ ุขุฎุฑ ุงูุชุญุฏูุซุงุช (6 ุฏูุณูุจุฑ 2025)

### ๐ง ุงูุฅุตุฏุงุฑ 3.1.0 - ุฅุฏุงุฑุฉ ุฃููุงุช ุงููุนููุงุช ุงููุฎุตุตุฉ

**ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ: ุตูุญุฉ ุงููุทูุฑ**
- โ **ุตูุญุฉ ูุทูุฑ ูุญููุฉ ุจูููุฉ ูุฑูุฑ** - `https://highlevel-nursery.pages.dev/developer/teacher-schedules?password=dev2025`
- โ **ุชุฎุตูุต ุฃููุงุช ุงูุจุตูุฉ ููู ูุนููุฉ ูููุฑุฏุฉ** - ุฃููุงุช ูุณุชููุฉ ููู ูุนููุฉ
- โ **ุซูุงุซุฉ ุฃููุงุช ูุงุจูุฉ ููุชุฎุตูุต:**
  - ููุช ูุชุญ ุจุตูุฉ ุงูุญุถูุฑ
  - ููุช ุจุฏุงูุฉ ุงุญุชุณุงุจ ุงูุชุฃุฎูุฑ
  - ููุช ูุชุญ ุจุตูุฉ ุงูุงูุตุฑุงู
- โ **ูุงุฌูุฉ ุงุญุชุฑุงููุฉ ูุณููุฉ** - ุนุฑุถ ุฌููุน ุงููุนููุงุช ูุน ุญููู ุงูุฃููุงุช
- โ **ุญูุธ ููุฑู** - ุฒุฑ ุญูุธ ููู ูุนููุฉ ูุน ุชุฃููุฏ ุงููุฌุงุญ
- โ **ุฅุนุงุฏุฉ ุชุนููู ุณุฑูุนุฉ** - ุงูุนูุฏุฉ ููุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ ุจุถุบุทุฉ ูุงุญุฏุฉ
- โ **ูุคุดุฑุงุช ุจุตุฑูุฉ ูุงุถุญุฉ:**
  - ๐ต ุนุงู - ุงุณุชุฎุฏุงู ุงูุฅุนุฏุงุฏ ุงูุนุงู
  - ๐ข ูุฎุตุต - ุงุณุชุฎุฏุงู ุชูููุช ูุฎุตุต
- โ **ุฒุฑ ุชุณุฌูู ุฎุฑูุฌ** - ูุญูุงูุฉ ุงูุตูุญุฉ ูู ุงููุตูู ุบูุฑ ุงููุตุฑุญ

**ุงูุชูููุงุช:**
- ๐ง ุฅุถุงูุฉ 3 ุฃุนูุฏุฉ ุฌุฏูุฏุฉ ูู ุฌุฏูู teachers
- ๐ง API endpoint ููุญูุธ: `POST /api/developer/save-teacher-schedule`
- ๐ง ููุทู fallback ุฐูู - ุฅุฐุง ูุงู ุงูุชูููุช ุงููุฎุตุต NULLุ ูุณุชุฎุฏู ุงูุฅุนุฏุงุฏ ุงูุนุงู
- ๐ง ูุฌุฑุฉ ุขููุฉ - migration 0018_add_custom_teacher_schedules.sql

**ุงูุฏููู ุงููุงูู:** ุฑุงุฌุน ููู `DEVELOPER_GUIDE.md` ููุชูุงุตูู

---

### ๐ ุตูุญุฉ ุงูุจุตูุฉ V3 - ูุจุณุทุฉ ูุงุญุชุฑุงููุฉ

**ุงููููุฒุงุช:**
- โ **ููุฏ ูุจุณุท 100%** - ุจุฏูู PWA ุฃู dependencies ูุนูุฏุฉ
- โ **ูุงุฌูุฉ ุงุญุชุฑุงููุฉ** ูุน ุฃุฒุฑุงุฑ ุจุตูุฉ ุฎุถุฑุงุก (ุญุถูุฑ) ูุญูุฑุงุก (ุงูุตุฑุงู)
- โ **ุชุชุจุน ุงููููุน ูู ุงูููุช ุงููุนูู** ูุน ุนุฑุถ ุงููุณุงูุฉ ูุงูุญุงูุฉ
- โ **ุฑุณุงุฆู ูุฌุงุญ/ูุดู ุงุญุชุฑุงููุฉ** ูุน ุชุฃุซูุฑุงุช ุญุฑููุฉ ุฌูููุฉ
- โ **ุนุฑุถ ูุงุถุญ ูุชูุตููู ูุฃุณุจุงุจ ุงููุดู** ุนูุฏ ุฑูุถ ุงูุจุตูุฉ
- โ **ุณุงุนุฉ ุฑูููุฉ** ุชุนุฑุถ ุงูููุช ุงูุญุงูู ุจุชูููุช ุงููููุช
- โ **ุฒุฑ ุณุฌูุงุชู** ูููุตูู ุงูุณุฑูุน ูุณุฌู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู

## โ๏ธ ุฅุนุฏุงุฏุงุช ุงูุจุตูุฉ ุงูุญุงููุฉ

### ุฃููุงุช ูุจูู ุงูุจุตูุฉ:
- **ููุช ูุชุญ ุงูุจุตูุฉ:** 02:00 ุตุจุงุญุงู
- **ุจุฏุงูุฉ ุญุณุงุจ ุงูุชุฃุฎูุฑ:** 07:15 ุตุจุงุญุงู
- **ุญุงูุฉ ุงููุธุงู:** โ ูุดุท

### ุงูููุงูุน ุงููุณุฌูุฉ:
1. **ุงูุญุถุงูุฉ** - Latitude: 29.485, Longitude: 47.564 (ูุทุงู: 30 ูุชุฑ) โ ูุดุท
2. **ุงูุญุถุงูู** - Latitude: 29.448, Longitude: 47.565 (ูุทุงู: 50 ูุชุฑ) โ ูุดุท

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ:
- `students` - ุจูุงูุงุช ุงูุทูุงุจ
- `parents` - ุฃูููุงุก ุงูุฃููุฑ
- `teachers` - ุงููุนููุงุช (ูุณู ุงูุญุถุงูุฉ) + **ุฃููุงุช ูุฎุตุตุฉ** (v3.1.0)
  - `custom_checkin_start` - ููุช ูุชุญ ุจุตูุฉ ุงูุญุถูุฑ ุงููุฎุตุต
  - `custom_late_calculation_start` - ููุช ุจุฏุงูุฉ ุงุญุชุณุงุจ ุงูุชุฃุฎูุฑ ุงููุฎุตุต
  - `custom_checkout_start` - ููุช ูุชุญ ุจุตูุฉ ุงูุงูุตุฑุงู ุงููุฎุตุต
- `attendance` - ุญุถูุฑ/ุบูุงุจ ุงูุทูุงุจ
- `teacher_attendance_logs` - ุณุฌูุงุช ุญุถูุฑ ุงููุนููุงุช ูุน GPS
- `nursery_locations` - ููุงูุน ุงูุญุถุงูุฉ ุงููุณุฌูุฉ
- `device_fingerprints` - ุจุตูุงุช ุงูุฃุฌูุฒุฉ ููุฃูุงู
- `suspicious_activity_logs` - ุณุฌู ุงูุฃูุดุทุฉ ุงููุดุจููุฉ
- `nursery_settings` - ุฅุนุฏุงุฏุงุช ุงููุธุงู (ุฃููุงุช ุงูุจุตูุฉ ุงูุนุงูุฉ)
- `budget_categories` - ูุฆุงุช ุงูููุฒุงููุฉ
- `budget_transactions` - ุงููุนุงููุงุช ุงููุงููุฉ
- `messages` - ุฑุณุงุฆู ุฃูููุงุก ุงูุฃููุฑ

## ๐ ูุธุงู ุงูุฃูุงู

### Device Fingerprint (ุจุตูุฉ ุงูุฌูุงุฒ)
- โ ุฌูุน 20+ ูุนูููุฉ ูุฑูุฏุฉ ุนู ุงูุฌูุงุฒ
- โ ุฏูุฉ 99.9% ูู ุงูุชุนุฑู ุนูู ุงูุฃุฌูุฒุฉ
- โ ูุนูู ุจุดูู ุตุงูุช ูู ุงูุฎูููุฉ
- โ ุชุณุฌูู ุชููุงุฆู ููุฃูุดุทุฉ ุงููุดุจููุฉ

### GPS Location Verification (ุงูุชุญูู ูู ุงููููุน)
- โ ุงูุชุฃูุฏ ูู ุฃู ุงููุนููุฉ ุฏุงุฎู ูุทุงู ุงูุญุถุงูุฉ
- โ ุฏุนู ููุงูุน ูุชุนุฏุฏุฉ
- โ ุญุณุงุจ ุงููุณุงูุฉ ุจุฏูุฉ ุนุงููุฉ
- โ ุนุฑุถ ุงูุญุงูุฉ (ุฏุงุฎู/ุฎุงุฑุฌ ุงููุทุงู)

### ูููุฏ ููุช ุงูุจุตูุฉ
- โ ุงูุจุตูุฉ ููุชูุญุฉ ูู ุงูุณุงุนุฉ 02:00 ุตุจุงุญุงู
- โ ุญุณุงุจ ุงูุชุฃุฎูุฑ ูุจุฏุฃ ุจุนุฏ ุงูุณุงุนุฉ 07:15 ุตุจุงุญุงู
- โ ุฑุณุงุฆู ูุงุถุญุฉ ุนูุฏ ูุญุงููุฉ ุงูุจุตูุฉ ุฎุงุฑุฌ ุงูุฃููุงุช

## ๐ ุงูุชุทููุฑ ุงููุญูู

### ุงูุชุซุจูุช ูุงูุชุดุบูู:
```bash
# ุชุซุจูุช ุงูููุชุจุงุช
npm install

# ุชุทุจูู ุงูุชุฑุญููุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญููุฉ
npm run db:migrate:local

# ุงูุจูุงุก
npm run build

# ุงูุชุดุบูู ุงููุญูู (ุชุทููุฑ)
npm run dev:d1

# ุฃู ุงุณุชุฎุฏุงู PM2
pm2 start ecosystem.config.cjs
```

### ุงูุฃูุงูุฑ ุงููุชุงุญุฉ:
```bash
# ุงูุจูุงุก ูุงููุดุฑ
npm run build              # ุจูุงุก ุงููุดุฑูุน
npm run deploy             # ูุดุฑ ููุฅูุชุงุฌ

# ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุญูู)
npm run db:migrate:local   # ุชุทุจูู ุงูุชุฑุญููุงุช
npm run db:seed            # ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ
npm run db:reset           # ุฅุนุงุฏุฉ ุชุนููู ูุงุนุฏุฉ ุงูุจูุงูุงุช
npm run db:console:local   # ูุชุญ console

# ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุฅูุชุงุฌ)
npm run db:migrate:prod    # ุชุทุจูู ุงูุชุฑุญููุงุช
npm run db:console:prod    # ูุชุญ console

# Git
npm run git:init           # ุฅูุดุงุก ูุณุชูุฏุน ุฌุฏูุฏ
npm run git:commit         # ุฅุถุงูุฉ commit ุณุฑูุน
npm run git:status         # ุญุงูุฉ Git
npm run git:log            # ุณุฌู ุงูู commits

# ุฃุฏูุงุช ูุณุงุนุฏุฉ
npm run clean-port         # ุชูุธูู ุงููููุฐ 3000
npm run test               # ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
npm run cf-typegen         # ุชูููุฏ TypeScript types
```

## ๐ ูููู ุงููุดุฑูุน

```
highlevel-nursery/
โโโ src/
โ   โโโ index.tsx              # ููุทุฉ ุงูุฏุฎูู ุงูุฑุฆูุณูุฉ
โ   โโโ routes/
โ   โ   โโโ nursery.tsx        # ุตูุญุงุช ุงูุญุถุงูุฉ (V3 attendance)
โ   โ   โโโ api.tsx            # API endpoints
โ   โ   โโโ admin.tsx          # ููุญุฉ ุงูุฅุฏุงุฑุฉ
โ   โโโ pwa-helper.ts          # PWA helpers
โ   โโโ types/
โโโ public/
โ   โโโ static/
โ       โโโ device-fingerprint.js   # ูุธุงู ุจุตูุฉ ุงูุฌูุงุฒ
โ       โโโ icons/                   # ุฃููููุงุช PWA
โโโ migrations/               # ุชุฑุญููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ 0009_attendance_system.sql
โ   โโโ 0011_security_system.sql
โ   โโโ 0012_create_nursery_locations.sql
โโโ wrangler.jsonc           # ุฅุนุฏุงุฏุงุช Cloudflare
โโโ ecosystem.config.cjs     # ุฅุนุฏุงุฏุงุช PM2
โโโ package.json
```

## ๐ API Endpoints

### ูุธุงู ุงูุญุถูุฑ ูููุนููุงุช:
- `GET /api/nursery/attendance-settings` - ุฌูุจ ุฅุนุฏุงุฏุงุช ุงูููุงูุน ูุฃููุงุช ุงูุจุตูุฉ
- `POST /api/nursery/attendance/record` - ุชุณุฌูู ุญุถูุฑ/ุงูุตุฑุงู ูุน Device Fingerprint
- `GET /api/nursery/teacher/attendance-logs` - ุฌูุจ ุณุฌูุงุช ุญุถูุฑ ุงููุนููุฉ

### ูุธุงู ุงูุฅุฏุงุฑุฉ:
- `GET /admin/nursery/api/attendance-settings` - ุฌูุจ ุฅุนุฏุงุฏุงุช ุฃููุงุช ุงูุจุตูุฉ
- `POST /admin/nursery/api/update-fingerprint-times` - ุชุญุฏูุซ ุฃููุงุช ุงูุจุตูุฉ

### ุฅุฏุงุฑุฉ ุงูุทูุงุจ:
- `GET /api/students/all` - ุฌูุจ ุฌููุน ุงูุทูุงุจ
- `POST /api/students` - ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ
- `PUT /api/students/:id` - ุชุญุฏูุซ ุจูุงูุงุช ุทุงูุจ

### ุฅุฏุงุฑุฉ ุงูุญุถูุฑ:
- `POST /api/attendance/record` - ุชุณุฌูู ุญุถูุฑ/ุบูุงุจ ุทุงูุจ
- `GET /api/attendance/student/:id` - ุณุฌู ุญุถูุฑ ุทุงูุจ
- `GET /api/attendance/monthly/:studentId/:month/:year` - ุชูุฑูุฑ ุดูุฑู

## ๐ก๏ธ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

- โ ุฌููุน ุงูุจูุงูุงุช ูุดูุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช Cloudflare D1
- โ ูุธุงู Device Fingerprint ูููุน ุงูุชูุงุนุจ
- โ ุชุณุฌูู ุฌููุน ุงูุฃูุดุทุฉ ุงููุดุจููุฉ ุชููุงุฆูุงู
- โ ุงูุชุญูู ูู ุงููููุน ุงูุฌุบุฑุงูู GPS ุจุฏูุฉ ุนุงููุฉ
- โ ูููุฏ ุฒูููุฉ ุนูู ูุจูู ุงูุจุตูุฉ

## ๐ ุงูุชูููุช

ุฌููุน ุงูุฃููุงุช ูู ุงููุธุงู ุชุณุชุฎุฏู **ุชูููุช ุงููููุช (UTC+3)**:
- โ ุณุฌูุงุช ุงูุญุถูุฑ
- โ ุงูุชูุงุฑูุฑ ุงูุดูุฑูุฉ
- โ ุงูุฅุญุตุงุฆูุงุช
- โ ุงูุณุงุนุฉ ุงููุนุฑูุถุฉ ูู ุตูุญุฉ ุงูุจุตูุฉ

## ๐ง ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

- **Backend:** Hono Framework (TypeScript)
- **Database:** Cloudflare D1 (SQLite)
- **Deployment:** Cloudflare Pages
- **Frontend:** TailwindCSS + Vanilla JavaScript
- **Security:** Canvas Fingerprint + GPS Verification
- **Geolocation:** Geolocation API
- **HTTP Client:** Axios

## ๐ฏ ููููุฉ ุงุณุชุฎุฏุงู ูุธุงู ุงูุจุตูุฉ

### ูููุนููุงุช:
1. ุงูุชุญ ุงูุฑุงุจุท: https://highlevel-nursery.pages.dev/teacher/login
2. ุฃุฏุฎู ุงูุฑูู ุงูุณุฑู ุงูุฎุงุต ุจู
3. ุณูุชู ุชูุฌููู ูุตูุญุฉ ุงูุจุตูุฉ ุชููุงุฆูุงู
4. ุงูุชุธุฑ ุญุชู ูุชู ุชุญุฏูุฏ ูููุนู (5-10 ุซูุงู)
5. ุชุฃูุฏ ูู ุฃูู ุฏุงุฎู ุงููุทุงู (โ ุฏุงุฎู ุงููุทุงู)
6. ุงุถุบุท ุนูู ุฒุฑ "ุจุตูุฉ ุงูุญุถูุฑ" (ุฃุฎุถุฑ ๐) ุฃู "ุจุตูุฉ ุงูุงูุตุฑุงู" (ุฃุญูุฑ ๐)
7. ุณูุธูุฑ ูู ุชุฃููุฏ ุงููุฌุงุญ ุฃู ุณุจุจ ุงููุดู ุจุงูุชูุตูู
8. ุงุถุบุท ุนูู "๐ ุณุฌูุงุชู" ููุดุงูุฏุฉ ุณุฌู ุญุถูุฑู ูุงูุตุฑุงูู

### ููุฅุฏุงุฑุฉ:
- ูููู ุชุนุฏูู ุฃููุงุช ุงูุจุตูุฉ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ
- ุงูููุช ุงูุญุงูู: ูุชุญ ุงูุจุตูุฉ 02:00 ุตุจุงุญุงูุ ุงูุชุฃุฎูุฑ ุจุนุฏ 07:15 ุตุจุงุญุงู

## ๐ ุงูุชุฑุฎูุต

ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2025 High Level Nursery

---

**ุขุฎุฑ ุชุญุฏูุซ:** 6 ุฏูุณูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 3.0.1  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุฅูุชุงุฌ - ุชู ุฅุตูุงุญ ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุชูุตูููุฉ

---

## ๐ง ุฅุตูุงุญ ุญุงุณู (6 ุฏูุณูุจุฑ 2025 - 05:30 ุตุจุงุญุงู)

**ุงููุดููุฉ:** ุฑุณุงุฆู ุงูุฎุทุฃ ูุงูุช ุชุธูุฑ ุนุงูุฉ "ูุดู ูู ุชุณุฌูู ุงูุญุถูุฑ" ุจุฏูู ุชูุงุตูู

**ุงูุณุจุจ:** ุฃุนูุฏุฉ `fingerprint_window_start` ู `fingerprint_window_end` ุบูุฑ ููุฌูุฏุฉ ูู ุฌุฏูู `nursery_settings`

**ุงูุญู:**
- โ ุฅุถุงูุฉ endpoint `/api/system/add-fingerprint-columns`
- โ ุชุทุจูู Migration ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฅูุชุงุฌูุฉ
- โ ุงูุขู ุฑุณุงุฆู ุงูุฎุทุฃ ุชุธูุฑ **ุชูุตูููุฉ ููุงุถุญุฉ** ูุน ุงูุณุจุจ ุงูุญูููู

**ุงููุชูุฌุฉ:**
- โ "ุฃูุชู ุฎุงุฑุฌ ูุทุงู ุฌููุน ุงูููุงูุน ุงููุณุฌูุฉ" + ุงููุณุงูุงุช ุงูุชูุตูููุฉ
- โ "โฐ ุงูุจุตูุฉ ูุบููุฉ ุงูุขู!" + ุงูููุช ุงููุชุจูู
- โ "โ ููุฏ ุณุฌูุชู ุญุถูุฑู ุจุงููุนู ุงูููู!" + ููุช ุงูุญุถูุฑ
